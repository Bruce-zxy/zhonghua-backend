<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type="text/css">
      iframe {
          width: 100%;
          height: 100%;
          display: inline-block;
          float: left;
      }
    </style>
  </head>
  <body>
    <main id="barba-wrapper">
      <div class="barba-container" data-namespace="grid">
        <a class="intro-thumb" href="1.html">
          <iframe id="f1" name="f1" src="1.html" frameborder="none" class="full"></iframe>
        </a>
        <a class="intro-thumb" href="2.html">
          <iframe id="f2" name="f2" src="2.html" frameborder="none" class="full"></iframe>
        </a>
        <a class="intro-thumb" href="3.html">
          <iframe id="f3" name="f3" src="3.html" frameborder="none" class="full"></iframe>
        </a>
        <a class="intro-thumb" href="4.html">
          <iframe id="f4" name="f4" src="4.html" frameborder="none" class="full"></iframe>
        </a>
      </div>
    </main>

    <script src="barba.js"></script>
    <script src="grid.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.1/TweenMax.min.js"></script>
    <script>

      function setClickEvent(frames) {
        Object.keys(frames).forEach(function (item, index) {
          frames[item].onload = function (e) {
            frames[item].contentDocument.getElementsByClassName('barba-container')[0].onclick = function (e) {
              document.getElementsByTagName('a')[index].click();
            }
          }
        });
      }

      var frames = document.getElementsByTagName('iframe');
      setClickEvent(frames);


      Barba.Dispatcher.on('newPageReady', function(currentStatus, oldStatus, container) {
        if (currentStatus.url === 'http://localhost:1009/demo/index.html') {
          setClickEvent(frames)
        }
      });

    </script>
  </body>
</html>
